<div class="modal">
    <div class="modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ECL Builder</h3>
                <button type="button" (click)="close()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <div *ngIf="eclObject" class="focus-concept-section">
                    <h3>Focus Concept</h3>
                    <ng-container *ngIf="eclObject?.operator">
                        <div class="focus-concept-row">
                            <select [(ngModel)]="eclObject.operator" (ngModelChange)="updateExpression()">
                                <option [value]="'descendantof'">Descendants</option>
                                <option [value]="'descendantorselfof'">Descendants or self of</option>
                                <option [value]="'ancestorof'">Parents</option>
                                <option [value]="'ancestororselfof'">Parents or self of</option>
                            </select>
                            <!--                        <p>Self</p>-->
                            <!--                        <input type="checkbox" [(ngModel)]="eclObject.self"/>-->
                            <input type="text" placeholder="Search..." [(ngModel)]="eclObject.fullTerm" (change)="getConceptId(eclObject)" [ngbTypeahead]="search" placement="bottom"/>
                        </div>
                    </ng-container>

                    <ng-container *ngIf="eclObject?.conjunctionExpressionConstraints">
                        <div *ngFor="let conj of eclObject.conjunctionExpressionConstraints; let first = first" class="focus-concept-row">
                            <p *ngIf="!first" class="px-4">AND</p>
                            <select [(ngModel)]="conj.operator" (ngModelChange)="updateConjunctionExpression()">
                                <option [value]="'descendantof'">Descendants</option>
                                <option [value]="'descendantorselfof'">Descendants or self of</option>
                                <option [value]="'ancestorof'">Parents</option>
                                <option [value]="'ancestororselfof'">Parents or self of</option>
                            </select>
<!--                            <p>Self</p>-->
<!--                            <input type="checkbox" [(ngModel)]="conj.self"/>-->
                            <input type="text" placeholder="Search..." [(ngModel)]="conj.fullTerm" (change)="getConceptId(conj)" [ngbTypeahead]="search" placement="bottom"/>
                        </div>
                    </ng-container>
                    <ng-container *ngIf="eclObject?.disjunctionExpressionConstraints">
                        <div *ngFor="let disj of eclObject.disjunctionExpressionConstraints; let first = first" class="focus-concept-row">
                            <p *ngIf="!first" class="px-4">OR</p>
                            <select [(ngModel)]="disj.operator" (ngModelChange)="updateDisjunctionExpression()">
                                <option [value]="'descendantof'">Descendants</option>
                                <option [value]="'descendantorselfof'">Descendants or self of</option>
                                <option [value]="'ancestorof'">Parents</option>
                                <option [value]="'ancestororselfof'">Parents or self of</option>
                            </select>
<!--                            <p>Self</p>-->
<!--                            <input type="checkbox" [(ngModel)]="disj.self"/>-->
                            <input type="text" placeholder="Search..." [(ngModel)]="disj.fullTerm" (change)="getConceptId(disj)" [ngbTypeahead]="search" placement="bottom"/>
                        </div>
                    </ng-container>
<!--                                        <button class="add-row" (click)="newFocusConceptRow()">+</button>-->
                </div>
<!--                <div class="focus-concept-section">-->
<!--                    <h3>Focus Concept</h3>-->
<!--                    <div *ngFor="let row of eclObject.focusConceptRows" class="focus-concept-row">-->
<!--                        <select>-->
<!--                            <option value="Descendants">Descendants</option>-->
<!--                            <option value="Parents">Parents</option>-->
<!--                        </select>-->
<!--                        <h5>Self</h5>-->
<!--                        <input type="checkbox"/>-->
<!--                        <input type="text" placeholder="Search..."/>-->
<!--                    </div>-->
<!--                    <button class="add-row" (click)="newFocusConceptRow()">+</button>-->
<!--                </div>-->
<!--                <div class="attribute-group-section">-->
<!--                    <h3>Attribute Group</h3>-->
<!--                    <button class="add-group" (click)="newAttributeGroup()">ADD GROUP</button>-->
<!--                    <ng-container *ngFor="let group of eclObject.attributeGroups">-->
<!--                        <div class="attribute-group">-->
<!--                            <div *ngFor="let set of group" class="attribute-group-row">-->
<!--                                <select>-->
<!--                                    <option value="Descendants">Descendants</option>-->
<!--                                    <option value="Parents">Parents</option>-->
<!--                                </select>-->
<!--                                <h5>Self</h5>-->
<!--                                <input type="checkbox"/>-->
<!--                                <input type="text" placeholder="Search..."/>-->
<!--                                <select>-->
<!--                                    <option value="=">=</option>-->
<!--                                    <option value="!=">!=</option>-->
<!--                                </select>-->
<!--                                <input type="text" placeholder="Search..."/>-->
<!--                            </div>-->
<!--                            <button class="add-row" (click)="newAttributeGroupRow(group)">+</button>-->
<!--                        </div>-->
<!--                    </ng-container>-->
<!--                </div>-->
<!--                <div class="exclusion-group-section">-->
<!--                    <h3>Exclusion Group</h3>-->
<!--                    <button class="add-group" (click)="newExclusionGroup()">ADD GROUP</button>-->
<!--                    <ng-container *ngFor="let group of eclObject.exclusionGroups">-->
<!--                        <div class="exclusion-group">-->
<!--                            <div *ngFor="let set of group" class="exclusion-group-row">-->
<!--                                <select>-->
<!--                                    <option value="Descendants">Descendants</option>-->
<!--                                    <option value="Parents">Parents</option>-->
<!--                                </select>-->
<!--                                <h5>Self</h5>-->
<!--                                <input type="checkbox"/>-->
<!--                                <input type="text" placeholder="Search..."/>-->
<!--                            </div>-->
<!--                            <button class="add-row extra-padding" (click)="newExclusionGroupRow(group)">+</button>-->
<!--                        </div>-->
<!--                    </ng-container>-->
<!--                </div>-->
                <div class="output-section">
                    <h3>Output</h3>
                    <p class="output">{{eclObject | json}}</p>
<!--                    <p class="output">{{eclString}}</p>-->
                    <p class="output">
                        <span class="mb-0" style="display:block; white-space:pre" *ngFor="let line of ECLexpressionBuilder(eclString)">{{line}}</span>
                    </p>

                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="cancel" (click)="close()">CANCEL</button>
                <button type="button" class="accept" (click)="accept()">OK</button>
            </div>
        </div>
    </div>
    <div class="app-modal-background" (click)="close()"></div>
</div>
